# Cashflow App (家庭/个人财务报表系统)

这是一个基于 **Spring Boot** 和 **Vue 3** 的全栈财务管理应用，旨在帮助用户通过专业的财务报表（资产负债表、收入支出表、现金流表）清晰掌握个人或家庭的财务状况，实现财富自由的数字化管理。

## 目录

- [项目简介](#项目简介)
- [核心设计思路](#核心设计思路)
  - [三大报表体系](#三大报表体系)
  - [现金流计算逻辑](#现金流计算逻辑)
- [功能特性](#功能特性)
- [技术栈](#技术栈)
- [项目结构](#项目结构)
- [快速开始](#快速开始)

## 项目简介

本项目不仅仅是一个记账软件，而是一个遵循**会计学原理**的个人财务报表系统。它通过资产负债表和收入支出表的联动，自动生成现金流表，帮助用户区分“资产”与“负债”、“主动收入”与“被动收入”，并精确计算每月的净现金流。

## 核心设计思路

本系统的核心在于对**三大财务报表**的数字化实现与逻辑关联：

### 1. 三大报表体系

- **资产负债表 (Balance Sheet)**
  - **资产 (Assets)**：
    - _流动资产_：现金、活期存款、货币基金（随时可用）。
    - _投资性资产_：股票、房产、定期存款、公积金（谋求增值）。
    - _自用资产_：自住房产、汽车、贵重家具（需考虑折旧）。
  - **负债 (Liabilities)**：
    - _消费负债_：信用卡欠款、消费贷（肉包子打狗无回报）。
    - _投资负债_：房贷、股票融资（杠杆投资）。
    - _自用资产负债_：车贷、自住房贷。

- **收入支出表 (Income & Expense Statement)**
  - **收入 (Income)**：
    - _劳动收入 (主动)_：工资、奖金、兼职。
    - _资产收入 (被动)_：房租、股息、利息。
  - **支出 (Expenses)**：
    - _生活支出_：衣食住行、教育、医疗。
    - _资产性支出_：购房、购车、存定期、买股票。
    - _借款还款_：本金还款、利息支出。

- **现金流表 (Cash Flow Statement)**
  - 基于前两张表**自动生成**，反映真实的现金流动情况。

### 2. 现金流计算逻辑 (核心算法)

系统遵循**避免重复计算**的原则，严格区分“资产转移”与“现金流出”：

> **月现金流 = 月总收入 - 月总支出**

- **月总收入** = 劳动收入 + 资产收入
- **月总支出** = 生活支出 + 借款利息 + 其他非本金支出

**⚠️ 关键设计：**
以下项目**不计入**月现金流支出（视为资产形式转换）：

- ❌ 房贷本金还款
- ❌ 股票购买本金
- ❌ 定期存款本金

以下项目**计入**月现金流支出：

- ✅ 房贷/车贷利息
- ✅ 房租支出
- ✅ 日常生活消费

## 功能特性

1.  **多账户体系**：支持手机号/邮箱注册登录，基于 JWT 的无状态认证，确保数据安全。
2.  **双报表模式**：
    - 每个用户可创建 **1 个个人财务报表**。
    - 每个用户可创建 **1 个家庭财务报表**。
3.  **智能计算**：
    - 只需维护资产负债和收支记录，系统自动计算净资产、总负债、月现金流等核心指标。
4.  **跨平台体验**：响应式 Web 设计，完美适配 **Windows PC** 浏览器与 **Android** 手机浏览器。

## 技术栈

### 后端 (Backend) - `cashflow`

- **框架**: Spring Boot 3.4.1
- **语言**: Java 17
- **数据库**: MySQL 8.0+
- **ORM**: Spring Data JPA
- **安全**: Spring Security + JJWT 0.12.3
- **工具**: Lombok, Maven

### 前端 (Frontend) - `fronted`

- **框架**: Vue 3 (Composition API)
- **构建**: Vite 7.3.1
- **状态管理**: Pinia
- **路由**: Vue Router 4
- **网络**: Axios
- **样式**: CSS3 (响应式布局)

## 项目结构

```
cashflow-app/
├── cashflow/              # 后端工程 (Maven)
│   ├── src/main/java/     # 核心业务代码 (Controller-Service-Repository)
│   └── src/main/resources/# 配置文件 (application.yml)
├── fronted/               # 前端工程 (Vite)
│   ├── src/               # Vue 组件与页面
│   └── public/            # 静态资源
├── 需求文档.md             # 详细业务需求说明
└── README.md              # 本文档
```

## 快速开始

### 环境依赖

- Java JDK 17+
- Node.js 18+
- MySQL 8.0+

### 部署步骤

1.  **数据库准备**：
    - 创建数据库 `cashflow_db` (或其他名称)。
    - 修改 `cashflow/src/main/resources/application.yml` 中的数据库连接配置。

2.  **启动后端**：

    ```bash
    cd cashflow
    mvn spring-boot:run
    ```

3.  **启动前端**：

    ```bash
    cd fronted
    npm install
    npm run dev
    ```

4.  **访问应用**：
    打开浏览器访问 `http://localhost:5173` (默认端口)。

---

**开源协议**: MIT
